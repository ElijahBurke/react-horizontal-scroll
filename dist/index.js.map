{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { useEffect, useLayoutEffect, useRef, useState }  from 'react'\nimport styles from './styles.module.css'\n\nconst ScrollEl = ({ item, width, mapper, i }) => {\n  return (\n    <div className={styles.scrollel} id={`screlc${i}`} style={{ width }}>\n      {mapper(item)}\n    </div>\n  )\n}\n\n// add box-sizing border box && add padding option\n\nexport const ReactScrolling = ({ mapper, list, time = \"30s\", width = \"100px\", delayBetweenScroll = 1}) => {\n  const containerRef = useRef();\n  const innerRef = useRef();\n  const [containerWidth, setContainerWidth] = useState(null);\n  const [numCanFit, setNumCanFit] = useState(null);\n  const [canFitInContainer, setCanFitInContainer] = useState(null);\n  const [displayList, setDisplayList] = useState(null);\n  const [children, setChildren] = useState(null);\n\n  function setContainerWidthToRef () {\n    setContainerWidth(containerRef.current.offsetWidth)\n    setCanFitInContainer(Math.ceil(containerRef.current.offsetWidth / width.replace('px', '')))\n  }\n\n  useEffect(() => {\n    if (canFitInContainer && list.length < canFitInContainer) {\n      setDisplayList(Array(Math.ceil(canFitInContainer / list.length)).fill(list).flat())\n    } else if (canFitInContainer) {\n      setDisplayList(list);\n    }\n  }, [canFitInContainer])\n\n  useLayoutEffect(() => {\n    if (!containerWidth && containerRef.current) {\n      setContainerWidthToRef();\n    }\n  }, [containerWidth, containerRef])\n\n  useLayoutEffect(() => {\n    if (innerRef.current) {\n      setChildren(innerRef.current.children);\n    }\n  }, [innerRef])\n\n  function doParentAnim (width) {\n    innerRef.current.style.transition = `${time.replace('s', '') / canFitInContainer}s linear`;\n    innerRef.current.style.left = `-${width}`;\n    innerRef.current.addEventListener('transitionend', resetTransition);\n  };\n\n  function resetTransition (e) {\n    if (e.target === innerRef.current) {\n      innerRef.current.style.transition = 'none';\n      innerRef.current.style.left = 0;\n      this.removeEventListener('transitionend', resetTransition);\n      children[children.length - 1].after(children[0]);\n      setTimeout(() => doParentAnim(width), delayBetweenScroll);\n    }\n  }\n\n  useEffect(() => {\n    if (children && canFitInContainer && innerRef.current) {\n      innerRef.current.style.transition = 'none';\n      innerRef.current.style.left = 0;\n      setTimeout(() => doParentAnim(width), delayBetweenScroll);\n    }\n    return () => { innerRef.current && innerRef.current.removeEventListener('transitionend', resetTransition)};\n  }, [children, innerRef, width, canFitInContainer, time, delayBetweenScroll])\n\n  useEffect(() => {\n    if (containerRef.current) window.addEventListener('resize', setContainerWidthToRef)\n    return () => { window.removeEventListener('resize', setContainerWidthToRef); }\n  }, [containerRef])\n\n  return (\n    <div className={styles.container} ref={containerRef}>\n      <div className={styles.innercontainer} ref={innerRef}>\n        {displayList && displayList.map((item, i) => <ScrollEl\n          key={Math.random()}\n          item={item}\n          width={width}\n          mapper={mapper}\n          time={time}\n          i={i}\n        />)}\n      </div>\n    </div>\n  )\n}"],"names":["ScrollEl","item","width","mapper","i","React","styles","scrollel","ReactScrolling","list","time","delayBetweenScroll","containerRef","useRef","innerRef","useState","containerWidth","setContainerWidth","canFitInContainer","setCanFitInContainer","displayList","setDisplayList","children","setChildren","setContainerWidthToRef","current","offsetWidth","Math","ceil","replace","useEffect","length","Array","fill","flat","useLayoutEffect","doParentAnim","style","transition","left","addEventListener","resetTransition","e","target","removeEventListener","after","setTimeout","window","container","innercontainer","map","random"],"mappings":"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"}